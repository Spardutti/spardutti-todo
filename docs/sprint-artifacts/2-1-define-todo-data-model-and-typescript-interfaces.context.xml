<story-context id=".bmad/bmm/workflows/4-implementation/story-context/template" v="1.0">
  <metadata>
    <epicId>2</epicId>
    <storyId>1</storyId>
    <title>Define Todo Data Model and TypeScript Interfaces</title>
    <status>drafted</status>
    <generatedAt>2025-11-22</generatedAt>
    <generator>BMAD Story Context Workflow</generator>
    <sourceStoryPath>docs/sprint-artifacts/2-1-define-todo-data-model-and-typescript-interfaces.md</sourceStoryPath>
  </metadata>

  <story>
    <asA>a developer</asA>
    <iWant>the Todo data model and TypeScript interfaces defined</iWant>
    <soThat>I have type safety and consistent data structures across the application</soThat>
    <tasks>
- [ ] Create src/types/ directory (AC: #1)
  - [ ] Verify src/ directory exists (created in Story 1-2)
  - [ ] Create src/types/ subdirectory
  - [ ] Verify TypeScript path alias `@/types` works (configured in Story 1-2)

- [ ] Define Todo interface in src/types/Todo.ts (AC: #1, #4)
  - [ ] Create Todo.ts file
  - [ ] Add JSDoc comment for the interface explaining its purpose
  - [ ] Define interface with id: string field (UUID v4)
  - [ ] Add text: string field (task description)
  - [ ] Add completed: boolean field (completion status)
  - [ ] Add createdAt: string field (ISO 8601 timestamp)
  - [ ] Add JSDoc comments for each field with format examples
  - [ ] Document that id is generated by crypto.randomUUID()
  - [ ] Document that createdAt uses ISO 8601 format (YYYY-MM-DDTHH:mm:ss.sssZ)
  - [ ] Document that text has no length limit but must be non-empty
  - [ ] Document that completed defaults to false for new todos

- [ ] Export Todo interface (AC: #2)
  - [ ] Add `export interface Todo` declaration
  - [ ] Verify no default export (use named export only)
  - [ ] Test import in a test file: `import type { Todo } from '@/types/Todo'`

- [ ] Verify TypeScript compilation (AC: #3)
  - [ ] Run `npm run build` to check compilation
  - [ ] Verify no TypeScript errors
  - [ ] Confirm strict mode is enabled in tsconfig.json
  - [ ] Verify no implicit any errors
  - [ ] Verify no null/undefined type errors

- [ ] Create example usage documentation (AC: #4)
  - [ ] Add code example in file comment showing Todo object creation
  - [ ] Show example UUID format: "550e8400-e29b-41d4-a716-446655440000"
  - [ ] Show example ISO 8601 timestamp: "2025-11-22T10:00:00.000Z"
  - [ ] Show example complete Todo object
  - [ ] Document that validation will be handled in TodoStore (not in type)

- [ ] Test type safety with sample usage
  - [ ] Create temporary test file (can be deleted)
  - [ ] Declare a variable with Todo type
  - [ ] Verify TypeScript enforces all required fields
  - [ ] Verify TypeScript catches type mismatches (e.g., number for completed)
  - [ ] Verify autocomplete works in IDE for Todo fields
  - [ ] Delete temporary test file after verification
</tasks>
  </story>

  <acceptanceCriteria>
1. **Todo interface exists with correct structure**
   - GIVEN the project foundation is established
   - WHEN I create the Todo type definitions at `src/types/Todo.ts`
   - THEN the file contains a Todo interface with the following fields:
     - `id: string` (UUID v4 format)
     - `text: string` (user-entered task description)
     - `completed: boolean` (completion status)
     - `createdAt: string` (ISO 8601 timestamp format)

2. **Interface exported correctly**
   - WHEN the interface is defined
   - THEN the file exports the Todo interface using `export interface Todo`
   - AND I can import it using: `import type { Todo } from '@/types/Todo'`

3. **TypeScript compilation succeeds**
   - WHEN I run TypeScript compilation
   - THEN the build succeeds with strict mode enabled
   - AND no type errors are reported
   - AND the interface can be imported in other files

4. **Documentation is clear and complete**
   - WHEN I review the file
   - THEN JSDoc comments explain each field's purpose and format
   - AND examples are provided for id (UUID) and createdAt (ISO 8601)
   - AND constraints are documented (e.g., text is required/non-empty)
</acceptanceCriteria>

  <artifacts>
    <docs>
      <!-- PRD - Product Requirements -->
      <doc>
        <path>docs/prd.md</path>
        <title>Product Requirements Document</title>
        <section>Functional Requirements - Task Management</section>
        <snippet>FR1: Users can create a new todo by typing text and pressing Enter. FR2: Users can view a list of all todos. This story establishes the foundational data model that supports these capabilities with type-safe Todo objects.</snippet>
      </doc>

      <!-- Architecture - Data Models -->
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document</title>
        <section>Data Architecture - Data Models (lines 360-372)</section>
        <snippet>Todo interface definition with id (UUID v4), text (string), completed (boolean), createdAt (ISO 8601 string). Interface for public APIs per naming conventions. Strict mode required with no any types.</snippet>
      </doc>

      <!-- Architecture - Implementation Patterns -->
      <doc>
        <path>docs/architecture.md</path>
        <title>Architecture Document</title>
        <section>Implementation Patterns - Naming Conventions (lines 175-190)</section>
        <snippet>File: PascalCase (Todo.ts). Interface: PascalCase (Todo). Use named export: export interface Todo (not default export). Types/Interfaces: PascalCase naming required for consistency across AI agents.</snippet>
      </doc>

      <!-- Tech Spec Epic 2 - Data Models -->
      <doc>
        <path>docs/sprint-artifacts/tech-spec-epic-2.md</path>
        <title>Epic 2 Technical Specification</title>
        <section>Data Models and Contracts (lines 87-109)</section>
        <snippet>Complete Todo interface specification with field constraints: id (UUID v4 via crypto.randomUUID()), text (required non-empty Unicode), completed (boolean no null), createdAt (ISO 8601 UTC). Validation rules defined - empty text handled in TodoStore, not in type definition.</snippet>
      </doc>

      <!-- UX Design - No direct reference for data types, but confirms terminal aesthetic and structure -->
      <doc>
        <path>docs/ux-design-specification.md</path>
        <title>UX Design Specification</title>
        <section>Component Library - Todo Item (lines 719-751)</section>
        <snippet>Todo items display with checkbox (unicode ☐/☑), todo text (wraps if long), and completion status. This UI component will consume the Todo interface with id, text, and completed fields for rendering.</snippet>
      </doc>
    </docs>

    <code>
      <!-- Existing src directory structure -->
      <artifact>
        <path>src/renderer.ts</path>
        <kind>renderer entry</kind>
        <symbol>N/A</symbol>
        <lines>full file</lines>
        <reason>This is the existing renderer entry point. Todo interface will be imported here in future stories (2.2+) for TodoStore integration.</reason>
      </artifact>

      <!-- TypeScript configuration -->
      <artifact>
        <path>tsconfig.json</path>
        <kind>configuration</kind>
        <symbol>paths, compilerOptions</symbol>
        <lines>15-18</lines>
        <reason>Contains path alias configuration "@/*": ["./src/*"] that enables imports like `import type { Todo } from '@/types/Todo'`. Strict mode enabled (noImplicitAny, strictNullChecks) as required by architecture.</reason>
      </artifact>

      <!-- Directory structure exists from Epic 1 -->
      <artifact>
        <path>src/types/.gitkeep</path>
        <kind>directory marker</kind>
        <symbol>N/A</symbol>
        <lines>N/A</lines>
        <reason>src/types/ directory already exists (created in Epic 1 Story 1-2). Todo.ts will be created as first actual type definition in this directory.</reason>
      </artifact>
    </code>

    <dependencies>
      <!-- Node.js and TypeScript -->
      <node>
        <package>typescript</package>
        <version>~5.9.2</version>
        <usage>TypeScript compiler for type checking and interface definitions. Strict mode enabled in tsconfig.json.</usage>
      </node>
      <node>
        <package>@types/node</package>
        <version>^24.10.1</version>
        <usage>Node.js type definitions. Provides types for crypto.randomUUID() which will be used in TodoStore (Story 2.2) to generate UUIDs per Todo interface id field.</usage>
      </node>
      <node>
        <package>vitest</package>
        <version>^4.0.13</version>
        <usage>Testing framework. While Story 2.1 defines a pure interface (no tests needed), TodoStore tests in Story 2.2 will import this Todo type.</usage>
      </node>

      <!-- Electron and Vite build tools -->
      <node>
        <package>electron</package>
        <version>39.2.3</version>
        <usage>Electron runtime provides crypto.randomUUID() for UUID generation (used in Story 2.2 TodoStore).</usage>
      </node>
      <node>
        <package>vite</package>
        <version>^5.4.21</version>
        <usage>Build tool that resolves @ path aliases configured in tsconfig.json, enabling clean imports of Todo interface.</usage>
      </node>
    </dependencies>
  </artifacts>

  <constraints>
    <!-- Architecture constraints from architecture.md -->
    <constraint>
      <type>Naming Convention</type>
      <rule>File must be PascalCase: Todo.ts (not todo.ts or Todo.type.ts)</rule>
      <source>docs/architecture.md:176-190 - Implementation Patterns</source>
    </constraint>

    <constraint>
      <type>Export Style</type>
      <rule>Use named export: `export interface Todo` (not default export)</rule>
      <source>docs/architecture.md:145 - Naming Conventions</source>
    </constraint>

    <constraint>
      <type>Type Safety</type>
      <rule>Strict mode enabled in tsconfig.json - no any types allowed, all fields required (no optional properties for MVP)</rule>
      <source>docs/architecture.md:351-355 - Type Safety Requirements</source>
    </constraint>

    <constraint>
      <type>Documentation Standard</type>
      <rule>JSDoc comments required for interface and each field. Include format examples for complex fields (UUID, ISO 8601). Document constraints and validation rules.</rule>
      <source>docs/architecture.md:153-158 - Documentation Standards</source>
    </constraint>

    <constraint>
      <type>Data Type Choice</type>
      <rule>Use `interface` not `type` - per architecture.md:354 "Interface for public APIs, type for internal structures". Todo is a public data model used across multiple modules.</rule>
      <source>docs/architecture.md:354, docs/sprint-artifacts/tech-spec-epic-2.md:106-109</source>
    </constraint>

    <constraint>
      <type>Date Format</type>
      <rule>Use string for dates (not Date object) - ISO 8601 format only (YYYY-MM-DDTHH:mm:ss.sssZ) for serialization-friendly storage</rule>
      <source>docs/architecture.md:151, docs/sprint-artifacts/tech-spec-epic-2.md:95</source>
    </constraint>

    <constraint>
      <type>Field Validation</type>
      <rule>Type definition is purely structural - NO validation logic in interface. Validation (empty text check, UUID generation, timestamp creation) lives in TodoStore (Story 2.2).</rule>
      <source>docs/sprint-artifacts/2-1-*.md:127-130, docs/sprint-artifacts/tech-spec-epic-2.md:107-109</source>
    </constraint>
  </constraints>

  <interfaces>
    <!-- This story DEFINES the core interface - future stories will USE it -->
    <interface>
      <name>Todo</name>
      <kind>TypeScript interface</kind>
      <signature>
interface Todo {
  id: string              // UUID v4 (crypto.randomUUID())
  text: string            // User-entered task description
  completed: boolean      // Completion status
  createdAt: string       // ISO 8601 timestamp
}
      </signature>
      <path>src/types/Todo.ts</path>
      <usage>Will be imported by TodoStore (Story 2.2), render.ts (Story 2.3), and all future stories that manipulate todo data. This is the ONLY data model in Epic 2.</usage>
    </interface>

    <!-- Import pattern to be used by other modules -->
    <interface>
      <name>Import Pattern</name>
      <kind>TypeScript import</kind>
      <signature>import type { Todo } from '@/types/Todo'</signature>
      <path>N/A (used in consuming files)</path>
      <usage>Standard import pattern for all modules consuming Todo type. Uses @ path alias configured in tsconfig.json. Type-only import (no runtime code).</usage>
    </interface>
  </interfaces>

  <tests>
    <standards>
      TypeScript interfaces have no runtime behavior, so traditional unit tests are not applicable. Type safety verification is done at compile time via the TypeScript compiler. Story 2.1 uses manual verification (create temp file with Todo objects, run npm build) instead of Vitest tests. Story 2.2 (TodoStore) will have comprehensive Vitest unit tests that USE this Todo interface.

      Verification approach for Story 2.1:
      1. TypeScript Compiler: `npm run build` catches type errors
      2. Manual Type Checking: Create test file with sample Todo objects, verify compiler catches missing fields
      3. IDE Autocomplete: Verify IntelliSense shows all 4 fields (id, text, completed, createdAt)
      4. Import Testing: Verify `import type { Todo }` works from other files
    </standards>

    <locations>
      - Story 2.1: No test files needed (pure type definition, verified at compile time)
      - Story 2.2: src/store/TodoStore.test.ts (will import and use Todo interface)
      - Future epics: Co-located .test.ts files alongside source (per architecture.md:193)
    </locations>

    <ideas>
      <!-- Manual verification steps for Story 2.1 -->
      <idea ac="AC1,AC2">
        Manual: Create temporary test file src/test-todo-type.ts with valid Todo object. Verify TypeScript compilation succeeds. Verify all 4 fields required (id, text, completed, createdAt).
      </idea>

      <idea ac="AC2">
        Manual: Import Todo type using `import type { Todo } from '@/types/Todo'` in temp file. Verify @ path alias resolves correctly. Verify type-only import works (no runtime code).
      </idea>

      <idea ac="AC3">
        Manual: Create invalid Todo object missing fields. Verify TypeScript compiler reports errors. Verify strict mode catches type mismatches (e.g., number for completed field).
      </idea>

      <idea ac="AC4">
        Manual: Review JSDoc comments in Todo.ts. Verify each field has format examples (UUID format, ISO 8601 format). Verify constraints documented (non-empty text, boolean only for completed).
      </idea>

      <!-- Future unit tests in Story 2.2 will use this interface -->
      <idea ac="Story 2.2">
        Future: TodoStore.test.ts will test add() method returns Todo with correct structure (id is UUID v4, createdAt is ISO 8601, completed defaults to false).
      </idea>
    </ideas>
  </tests>
</story-context>
